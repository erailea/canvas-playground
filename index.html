<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>HTML5 Canvas</title>
</head>

<body>
  <input id="rngEn" style="position:absolute;" value="10" type="range" max="10" min="5" onchange="EnBoyDegistir()" />
  <input id="rngOffSet" style="position:absolute;top: 70px;" value="5" step="10" type="range" max="150" min="50"
    onchange="EnBoyDegistir()" />
  <input id="rngBoy" style="position:absolute;top: 35px;" value="7" type="range" max="10" min="5"
    onchange="EnBoyDegistir()" />
  <canvas id="draw" width="800" height="800"></canvas>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <script>
    const canvas = document.querySelector("#draw");
    const ctx = canvas.getContext("2d");
    const debug = false;
    let isDrawing = false;
    let lastX = 0;
    let lastY = 0;
    let direction = true;
    let colormax = 360;
    let colormin = 0;
    let linewdtmax = 12;
    let linewdtmin = 100;
    let hue = colormin;
    let shapes = [];

    CanvasHazirla();

    function CanvasHazirla() {
      ctx.lineWidth = linewdtmin;
      canvas.width = window.innerWidth - 50;
      canvas.height = window.innerHeight - 50;
      ctx.strokeStyle = "#BA8A55";
      ctx.lineJoin = "round";
      ctx.lineCap = "round";
      ctx.globalCompositeOperation = "darken";
      ctx.fillStyle = `hsl(0,100%, 95%)`;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function BuildGrid(_en, _boy, _offSet) {
      let en = _en;
      let boy = _boy;
      let offSet = _offSet;
      let cellSize = (((canvas.height - (offSet * 2)) / boy < (canvas.width - (offSet * 2)) / en) ? (canvas.height - (
        offSet *
        2)) / boy : (canvas.width - (offSet * 2)) / en);
      let centerwoffSet = (canvas.width - 2 * offSet) / 2 - ((en) * cellSize) / 2 + offSet;
      let centerhoffSet = (canvas.height - 2 * offSet) / 2 - ((boy) * cellSize) / 2 + offSet;

      if (cellSize < 5) {
        shapes = [];
        Draw();
        return;
      };

      if (debug) {
        console.log('canvas.width', canvas.width, 'canvas.height', canvas.height, 'en', en, 'boy', boy, 'offSet',
          offSet,
          'cellSize', cellSize, 'centerwoffSet', centerwoffSet, 'centerhoffSet', centerhoffSet);
      }
      shapes = [];
      for (let i = 0; i < en; i++) {
        for (let j = 0; j < boy; j++) {
          shapes.push({
            x: i * cellSize + centerwoffSet,
            y: j * cellSize + centerhoffSet,
            w: cellSize,
            h: cellSize,
            name: "rect"
          });
        }
      }

      Draw();
    }

    function Draw() {
      Reset();
      ctx.beginPath();
      for (let index = 0; index < shapes.length; index++) {
        const e = shapes[index];
        if (e.name = "rect") {
          ctx.rect(e.x, e.y, e.w, e.h);
        }
      }
      ctx.stroke();
    }

    BuildGrid(parseInt($("#rngEn").val()), parseInt($("#rngBoy").val()), parseInt($("#rngOffSet").val()));

    function EnBoyDegistir() {
      BuildGrid(parseInt($("#rngEn").val()), parseInt($("#rngBoy").val()), parseInt($("#rngOffSet").val()));
    }

    window.onresize = function () {
      EnBoyDegistir();
    }

    function Reset() {
      CanvasHazirla();




    }
  </script>

  <style>
    html,
    body {
      margin: 0;
    }
  </style>
</body>

</html>